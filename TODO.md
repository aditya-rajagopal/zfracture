# Things needed in the Fracture Engine

## Engine general:
- [ ] Does the data in the engine structure need to be pointers or is it okay to have them flat in the structure.
- [ ] Create a looped reload system. That will make replay easy. 
    - [ ] Save inputs
    - [ ] Save delta times
    - [ ] Save resource states
        - [ ] Create the ability to seralise and deserialise structs. Try and disallow nested pointers
- [x] Test if the game can be loaded as a DLL in debug and statically linked in release
    - [x] Game builds as a DLL in debug builds and is loaded dynamically
    - [x] Everything is statically linked in release builds
- [ ] logging
    - [x] Create basic logging functionality
    - [x] Make logs coloured based on log level
    - [x] Move logging to the core library 
    - [x] Can we have 1 logger that just has different scopes so they share the buffered writer. Rather than having
          multiple buffered writers. This way we can also have more scopes than the two.
    - [ ] Fix all the missing debug asserts removed when log was moved to core
    - [ ] Change the log function to also optionally write to a log file in addition to console
    - [ ] Seperate log thread? job?
        - [ ] Could this be done by having a logger that has a memory arena and adds data to a buffer and every second dumps the data into the log and reset the arena. After max logs are written there is no allocations.
- [ ] Memory System
    - [x] Create a tracking allocator that resolves to a normal allocator in release
    - [x] Add allocators to the context passed to the game. One GPA and one FrameArena
    - [x] Move memory into core
    - [x] Remove merge enums from memory and let the game handle it's own memory
    - [ ] Should the FrameArena be replaced by a FixedBufferAllocator (i.e a bump allocator) - YES
        - [ ] A linear allocator
    - [ ] Create a custom allocator for Fracture that allows larger virtual space allocations for expanding allocations
- [ ] windows platform layer
    - [x] Create a window
    - [x] Handles events and dispatch to the event system
    - [ ] Support multiple windows
    - [ ] Support controllers
- [ ] Event system
    - [x] Basic event handling and types
    - [x] Move event system into core as type
    - [x] Move event state into Engine
    - [x] We need additional context for the listener and sender since most game functions are stateless
    - [ ] Maybe the game can have it's own event handler and can be called by the event system instead of having to connect directly
    - [ ] Check if we need SoA or AoS for the event data.
    - [ ] Make sure that when the DLL is reloaded the event listerers are still valid
    - [ ] Do we need the static versions of some of the functions
    - [ ] Create multiple lists for handling frame future events and timed events
        - [ ] Create an EventData pool for the deffered events storage
    - [ ] Does the event system need the idea of layers so that certain handlers get first shot at handling events
    - [ ] Do permanent events need a seperate structure?
    - [ ] Priority queue for deferred events?
- [ ] Input system
    - [x] Initial input system implementation
    - [x] API for platform layer to dispatch input events 
    - [ ] Support controllers
    - [ ] Should I save the number of transitions that happen within a frame
    - [ ] Remove reference to event system here. The platform/application should handle firing events. Or pass the engine.
    - [ ] Think of using a bit set for the keys instead of an array
    - [ ] Are the comptime versions of the functions necessary
    - [ ] Should there be the rest of the messages be parsed for key and mouse events whne firing events
- [ ] Signal System
    - [ ] Decide if there is a need for signal plug and socket system.
- [ ] SIMD Math Library
    - [x] Basic vec
    - [x] Basic matrix
    - [x] Basic Affine
    - [x] Basic Quaternions
    - [ ] Docstrings
    - [ ] Benchmarks
    - [ ] Tests
    - [ ] Shapes
        - [x] Rectangle
        - [ ] Circle
        - [ ] Triangle
        - [ ] Point
        - [ ] Line
- [ ] Containers
    - [ ] StaticArrayList: Partially implemented
    - [ ] Array backed linked list?
    - [ ] Array backed memory pool?
    - [ ] Create a static multiarrayList
- [ ] Instrumentation
- [ ] Renderer
    - [ ] Unify all errors into a small set that are allowed to crash the program. Everything else needs to be handled
    - [ ] Create renderer settings on the engine/app side rather than hard coded settings
    - [ ] Create image pools and modify image.zig to use offsets
    - [ ] Deal with possibility of more than 1 queues for graphics
        - [ ] Should the graphics queue have more than 1 queue
    - [ ] Should 0,0 be top left or bottom left. It is bottom left in OpenGL
    - [ ] Change command buffers to be array list rather than allocated every time teh swapchain is recreated
    - [ ] implement custom allocator for deubg builds
    - [ ] Allow choosing different graphics Backends.
- [ ] Jobs System
- [x] Move types into core
- [x] Application and platform should be part of entry point
